function Popup(){this.id="",this.active=!1,this.bkgnd=!1,this.dominant=!1,this.frame="",this.button=!1,this.openFun="",this.closeFun=""}function TrackingPop(){Popup.call(this),this.trackName="",this.trackCloseName=""}function closeOpenPops(t){currentlySwapping===!1&&""!=t&&(currentlySwapping=!0,toClose=makePopType(t),toClose.setContent(t),toClose.closePop(),console.log('closeOpenPops: "'+t+'"'))}function makePopType(t){return newPop=document.getElementById(t).getAttribute("data-trackingOpenName")?new TrackingPop:new Popup}function closeThisPop(t){currentlySwapping===!1&&""!=t&&(toClose=makePopType(t),toClose.setContent(t),toClose.getActiveState()&&(currentlySwapping=!0,toClose.closePop()))}function openThisPopup(t){currentlySwapping===!1&&""!=t&&(toOpen=makePopType(t),toOpen.setContent(t),toOpen.getActiveState()||(currentlySwapping=!0,toOpen.openPop()))}function closeAllPops(){currentlySwapping===!1&&(""!==currDomOpen||""!==currOpen)&&(currentlySwapping=!0,""!=currDomOpen&&(toClose=new Popup,toClose.setContent(currDomOpen),toClose.closePop()),""!=currOpen&&(toClose=new Popup,toClose.setContent(currOpen),toClose.closePop()))}function popupToggle(t){currentlySwapping===!1&&(currentlySwapping=!0,toToggle=makePopType(t),toToggle.setContent(t),toToggle.getActiveState()===!0?toToggle.closePop():toToggle.openPop())}var openMessage=" open",closeMessage=" close",currOpen="",currDomOpen="",currentlySwapping=!1,switching=!1;Popup.prototype.setContent=function(t){this.id=t;try{if(!document.getElementById(this.id))throw"the element "+t+" does not exist";if(this.active=-1!==document.getElementById(this.id).className.indexOf("inactive")?!1:!0,1==document.getElementById(this.id).getAttribute("popBg")){this.bkgnd=!0;var e=this.id+"_bg";document.getElementById(e)||this.makeBg()}if(-1!==document.getElementById(this.id).className.indexOf("dominant")&&(this.dominant=!0),document.getElementById(this.id).getAttribute("frame")){this.frame=document.getElementById(this.id).getAttribute("frame");var n=this.id+"_frame";document.getElementById(n)||this.makeFrame()}if(document.getElementById(this.id).getAttribute("onOpening")&&(this.openFun=document.getElementById(this.id).getAttribute("onOpening")),document.getElementById(this.id).getAttribute("onClosing")&&(this.closeFun=document.getElementById(this.id).getAttribute("onClosing")),document.getElementById(t).classList.contains("button")===!0){this.button=!0;var o=this.id+"_btn";document.getElementById(o)||this.makeButton(t)}}catch(i){console.log(i)}},Popup.prototype.getActiveState=function(){return this.active},Popup.prototype.hasBackground=function(){return this.bkgnd},Popup.prototype.getDominance=function(){return this.dominant},Popup.prototype.hasButton=function(){return this.button},Popup.prototype.isIframe=function(){return""!=this.frame?!0:!1},Popup.prototype.hideBg=function(){var t=this.id+"_bg",e=document.getElementById(t);-1===e.className.indexOf("inactive")&&(e.className=e.className.replace("active","inactive"),e.addEventListener("webkitTransitionEnd",function(){e.style.display="none",this.removeEventListener("webkitTransitionEnd",arguments.callee,!1)}))},Popup.prototype.showBg=function(){var t=this.id+"_bg",e=document.getElementById(t);e.style.display="block",setTimeout(function(){e.className=e.className.replace("inactive","active")},1)},Popup.prototype.makeBg=function(){var t=document.createElement("div"),e=this.id+"_bg";t.setAttribute("id",e),t.setAttribute("ontouchend","closeThisPop('"+this.id+"')"),t.setAttribute("class","popBg inactive");var n=document.getElementById(this.id),o=n.parentNode;o.insertBefore(t,n)},Popup.prototype.makeButton=function(){var t='<div class="popBtn remotebtn"  ontouchend="closeThisPop(\''+this.id+'\')" id="'+this.id+'_btn" ></div>',e=document.getElementById(this.id);e.innerHTML=t+e.innerHTML},Popup.prototype.makeFrame=function(){var t=this.id+"_frame",e=document.getElementById(this.id);e.innerHTML=e.innerHTML+"<iframe src="+this.frame+" id="+t+"></iframe>"},Popup.prototype.closeDomBg=function(){this.hasBackground()&&""!=currDomOpen&&(x=new Popup,x.setContent(currDomOpen),x.hasBackground()&&x.hideBg())},Popup.prototype.openDomBg=function(){this.hasBackground()&&""!=currDomOpen&&(x=new Popup,x.setContent(currDomOpen),x.hasBackground()&&x.showBg())},Popup.prototype.closePop=function(){var t=document.getElementById(this.id);this.hasBackground()&&this.hideBg(),t.className=t.className.replace("active","inactive"),setTimeout(this.closeFun,0),this.active=!1,this.getDominance()?currDomOpen="":(currOpen="",switching||this.openDomBg()),t.addEventListener("webkitTransitionEnd",function(){t.style.display="none",this.removeEventListener("webkitTransitionEnd",arguments.callee,!1),switching?switching=!1:setTimeout(function(){currentlySwapping=!1},300)})},Popup.prototype.openPop=function(){var t="";this.hasBackground()&&this.showBg(),this.getDominance()?t=currDomOpen:(t=currOpen,this.closeDomBg()),""!=t&&(toClose=new Popup,toClose.setContent(t),switching=!0,toClose.closePop());var e=document.getElementById(this.id);e.style.display="block",setTimeout(this.openFun,0),setTimeout(function(){e.className=e.className.replace("inactive","active")},1),this.getDominance()?currDomOpen=this.id:currOpen=this.id,this.active=!0,switching?document.getElementById(t).addEventListener("webkitTransitionEnd",function(){currentlySwapping=!1,this.removeEventListener("webkitTransitionEnd",arguments.callee,!1)}):currentlySwapping=!1},TrackingPop.prototype=new Popup,TrackingPop.prototype.setContent=function(t){Popup.prototype.setContent.call(this,t),document.getElementById(t).getAttribute("data-trackingOpenName")&&(this.trackName=document.getElementById(t).getAttribute("data-trackingOpenName")),document.getElementById(t).getAttribute("data-trackingCloseName")&&(this.trackCloseName=document.getElementById(t).getAttribute("data-trackingCloseName"))},TrackingPop.prototype.closePop=function(){var t="";Popup.prototype.closePop.call(this),""==this.trackCloseName?(t=this.trackName+closeMessage,this.trackingMessage(t)):"NONE"!=this.trackCloseName&&this.trackingMessage(this.trackCloseName)},TrackingPop.prototype.openPop=function(){Popup.prototype.openPop.call(this);var t="";t=""==this.trackCloseName?this.trackName+openMessage:this.trackName,this.trackingMessage(t)},TrackingPop.prototype.trackingMessage=function(t){try{if(!client)throw"client object not instantiated";"function"==typeof AlloraTrack?client.track("","TrackMeasurement","",t,!0):"function"==typeof iRepTrack?client.track("",t,!0):console.log("tracking type not defined. Must be iRep or Allora.")}catch(e){console.log(e)}};

function removeFrame(id){
    frameid = document.getElementById(id + "_frame");
    setTimeout(function(){frameid.parentNode.removeChild(frameid);}, 500)
}
